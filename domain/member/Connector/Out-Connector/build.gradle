buildscript {
    ext {
        queryDslVersion = "5.0.0"
    }
}

project(':domain:member:Connector:Out-Connector') {
    dependencies {
        implementation project(':domain:member:Core:Model')
        implementation project(':domain:member:Core:Enumerate')
        implementation project(':domain:member:Core:Exception')
        implementation project(':domain:member:Infrastructure:Rdb-repository')
        implementation project(':domain:member:Infrastructure:Api-Client')

        implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
        implementation 'org.springframework.boot:spring-boot-starter'
        compileOnly 'org.projectlombok:lombok'
        annotationProcessor 'org.projectlombok:lombok'
    }

    // Querydsl 설정부
    def generated = 'src/main/generated'

    // querydsl QClass 파일 생성 위치를 지정
    tasks.withType(JavaCompile) {
        options.getGeneratedSourceOutputDirectory().set(file(generated))
    }

    // java source set 에 querydsl QClass 위치 추가
    sourceSets {
        main.java.srcDirs += [ generated ]
    }

    // gradle clean 시에 QClass 디렉토리 삭제
    clean {
        delete file(generated)
    }

    tasks.bootJar {
        enabled = false
    }

    tasks.jar {
        enabled = true
    }

    tasks.register("prepareKotlinBuildScriptModel"){}
}