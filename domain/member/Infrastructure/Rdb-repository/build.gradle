buildscript {
    ext {
        queryDslVersion = "5.0.0"
    }
}

project(':domain:member:Infrastructure:Rdb-repository') {
    dependencies {
        implementation project(':common:Jpa')
        implementation project(':domain:member:Core:Enumerate')
        //jackson
        implementation 'com.fasterxml.jackson.core:jackson-core:2.12.4'
        implementation 'com.fasterxml.jackson.core:jackson-databind:2.12.4'
        implementation 'com.fasterxml.jackson.core:jackson-annotations:2.12.4'
        implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
        compileOnly 'org.projectlombok:lombok'
        runtimeOnly 'org.mariadb.jdbc:mariadb-java-client'
        annotationProcessor 'org.projectlombok:lombok'
    }
    // Querydsl 설정부
    def generated = 'src/main/generated'

    // querydsl QClass 파일 생성 위치를 지정
    tasks.withType(JavaCompile) {
        options.getGeneratedSourceOutputDirectory().set(file(generated))
    }

    // java source set 에 querydsl QClass 위치 추가
    sourceSets {
        main.java.srcDirs += [ generated ]
    }

    // gradle clean 시에 QClass 디렉토리 삭제
    clean {
        delete file(generated)
    }
    tasks.bootJar {
        enabled = false
    }

    tasks.jar {
        enabled = true
    }
}